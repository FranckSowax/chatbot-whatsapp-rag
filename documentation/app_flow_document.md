# Application Flow Document for Intelligent WhatsApp AI Middleware SaaS

## Onboarding and Sign-In/Sign-Up
A new user discovers the application by navigating to the public landing page, which clearly presents the value proposition and a prominent button to create an account. Clicking this button takes the user to the sign-up page where they enter their name, company name, email address and create a secure password. They then choose a subscription tier and enter payment details using the integrated billing form. After submitting, they receive an email with a confirmation link. Once they click the link, their email is verified and they are automatically signed in and redirected to the initial setup page. From any page, a “Sign Out” link in the header ends the session and returns the user to the landing page. If a user forgets their password, they click the “Forgot Password” link on the login form, enter their email address, and receive a reset link. That link leads them to a secure page where they set a new password before returning to the login screen. No social or third-party logins are offered in the first version, so all authentication is handled by email and password through Supabase Auth.

## Main Dashboard or Home Page
After signing in, the user lands on the Dashboard page. The top header displays the application logo on the left, notifications for events like completed ingestions or billing reminders in the middle, and an account dropdown on the right that gives quick access to profile settings and sign out. On the left side, a collapsible sidebar lists the main sections: Overview, Documents, Integrations, Conversations, Analytics, Billing, Users, and Settings. The central panel on the Overview page shows key metrics at a glance. It displays the total number of WhatsApp queries processed this month, the average AI response time, and the latest customer satisfaction score. Below these metrics, a timeline widget shows recent ingestion jobs and notes any errors or warnings. From here, users can click on any metric or widget title to navigate directly to the corresponding detailed page.

## Detailed Feature Flows and Page Transitions

### ManyChat Integration Flow
When the user selects the Integrations section in the sidebar, they arrive at a page where they first see a form field labeled “ManyChat API Key.” The user pastes their key and clicks a Save button. The application validates the key by calling the ManyChat API and displays either a success banner or an error message if the key is invalid. Once validated, a “Deploy WhatsApp Template” button appears. Clicking it triggers a backend call that provisions a prebuilt ManyChat template in the user’s ManyChat account. On success, the page shows a confirmation message along with a unique webhook URL. The user copies that URL and follows the inline instructions to paste it into their ManyChat flow settings.

### Document Upload and Ingestion Flow
Navigating to the Documents section brings the user to a page with a large drag-and-drop area labeled “Upload PDF.” When the user drops a file or selects it via a file browser, the system immediately validates the file size, page count, format and text layer. If the file exceeds twenty megabytes, more than two hundred pages or lacks extractable text, an inline error message explains the problem. For valid files, a progress bar shows upload status to Supabase Storage. Upon completion, the UI lists the file with a status of “Pending Ingestion.” Behind the scenes, the ingestion pipeline starts automatically. It extracts text, vectorizes the content using pgvector and indexes it in Supabase. The Documents page polls the backend and updates the status to “Ingestion Complete” or “Failed.” In case of failure, a retry button appears so the user can restart the ingestion process.

### WhatsApp Interaction Flow
While the user does not directly interact with incoming WhatsApp messages in the web UI, every message that an end user sends to the WhatsApp bot is forwarded by ManyChat to our API. The API endpoint immediately acknowledges receipt in under one second to satisfy the 10-second timeout rule. After acknowledgment, the background process vectorizes the incoming text, queries Supabase for relevant document passages, and sends the context plus the question to Google Gemini Pro. When the AI model returns its answer, our service pushes the reply back to the user’s WhatsApp conversation via ManyChat. To view these interactions in the dashboard, the user goes to the Conversations section. That page shows a searchable list of all messages, organized by date, conversation ID and status. Each entry displays the end user’s question, the AI reply, the round-trip time and a link to view the full conversation thread.

### Analytics and Reporting Flow
Selecting Analytics in the sidebar brings up a page with interactive charts and tables. The top of the page features date filters for today, last week, last month or a custom range. Below, a line graph displays the volume of WhatsApp queries over time. A bar chart compares average response times per week, and a table lists the top ten most common user questions. A satisfaction score gauge shows the average rating from post-interaction surveys. Clicking on any data point drills into raw conversation logs for further inspection.

### Billing and Subscription Flow
When the user opens the Billing section, they see their current subscription tier, the included monthly quotas for queries and document storage, and any overages incurred so far. A list of past invoices appears below with date, amount and payment status. The user can click an invoice to download it as a PDF. A button labeled “Change Plan” opens a modal where the user selects a new tier and confirms the billing change. If the user’s payment method is expired or fails, an alert banner appears prompting them to update their card information. The user updates their payment method via a secure form and retries failed charges directly from the Billing page.

### User Management Flow
In the Users section, the account owner sees a list of team members with their roles: Administrator, Support or Standard User. To invite a new user, the owner clicks “Invite User,” enters an email address and assigns a role. An invitation email is sent with a link that allows the new user to set their password and log in. The owner can revoke access by clicking a Remove action next to any user, which immediately invalidates their credentials.

## Settings and Account Management
The Settings section lets the user manage personal and account-wide preferences. Under Profile, the user edits their name and email or changes their password through a dedicated form that requires the current password for confirmation. The Notifications tab allows the user to toggle email alerts for ingestion completions, billing reminders and system updates. In the API Settings tab, the user can view and regenerate their unique webhook URL. The Data Privacy tab offers GDPR-compliant controls: the user can request a full export of all their data and can initiate account deletion. Deletion triggers a workflow that removes user data and purges documents from storage within thirty days. After any settings change, a confirmation banner appears and the user can return to the main app flow via the sidebar.

## Error States and Alternate Paths
If the user enters invalid data in any form field, such as a malformed email or a password that fails complexity rules, the form displays an inline error message explaining the correction needed. Should network connectivity drop while the user is uploading a PDF or saving settings, a notification banner warns of the disruption and the operation automatically retries when the connection is restored. If the ingestion pipeline fails for any reason, the Documents page marks the file as failed and provides an option to retry. During ManyChat integration, if the API key is invalid or the template deployment fails, the UI shows the raw error returned by the ManyChat API along with guidance on how to resolve issues in the ManyChat account. In the Billing section, if a charge is declined, the page flags the failed transaction, halts quota resets at month start and prompts the user to update payment information before allowing further usage. If the user attempts to access a restricted page due to insufficient role permissions, the system redirects them to the Dashboard and shows an access denied message.

## Conclusion and Overall App Journey
From the moment a prospective customer lands on the public site and signs up, through email verification and subscription selection, every step is designed for clarity and speed. Once inside, users quickly configure their ManyChat integration, upload PDF documents and watch as their knowledge base is ingested automatically. End users then interact with the WhatsApp bot, receiving immediate acknowledgments and contextual replies powered by Google Gemini Pro. Meanwhile, the client company monitors usage statistics, manages team members, views conversation history, oversees billing and controls data privacy settings. This seamless journey, from a brand-new sign-up to everyday support operations via WhatsApp, ensures that businesses can deploy and rely on a smart, secure chatbot solution with minimal friction.